@{
    ViewBag.Title = "Home Page";
}
@model OmniaWeb.Models.DashboardViewModel 

<div id="page_content">
    <div id="page_content_inner">
        <!-- statistics (small charts) -->
        <div class="uk-grid uk-grid-width-large-1-4 uk-grid-width-medium-1-2 uk-grid-medium uk-sortable sortable-handler hierarchical_show" data-uk-sortable data-uk-grid-margin>
            <div>
                <div class="md-card">
                    <div class="md-card-content">
                        <div class="uk-float-right uk-margin-top uk-margin-small-right"><span class="peity_visitors peity_data">5,3,9,6,5,9,7</span></div>
                        <span class="uk-text-muted uk-text-small">All projects </span>
                        <h2 class="uk-margin-remove"><span class="countUpMe">@Model.nb_project<noscript>12456</noscript></span></h2>
                    </div>
                </div>
            </div>
            <div>
                <div class="md-card">
                    <div class="md-card-content">
                        <div class="uk-float-right uk-margin-top uk-margin-small-right"><span class="peity_sale peity_data">5,3,9,6,5,9,7,3,5,2</span></div>
                        <span class="uk-text-muted uk-text-small">Projects in progress </span>
                        <h2 class="uk-margin-remove"><span class="countUpMe">@Model.nb_not_finished_project<noscript>142384</noscript></span></h2>
                    </div>
                </div>
            </div>
            <div>
                <div class="md-card">
                    <div class="md-card-content">
                        <div class="uk-float-right uk-margin-top uk-margin-small-right"><span class="peity_orders peity_data">64/100</span></div>
                        <span class="uk-text-muted uk-text-small">Projects Completed</span>
                        <h2 class="uk-margin-remove"><span class="countUpMe">@Model.nb_finidhed_project<noscript>64</noscript></span></h2>
                    </div>
                </div>
            </div>
            <div>
                <div class="md-card">
                    <div class="md-card-content">
                        <div class="uk-float-right uk-margin-top uk-margin-small-right"><span class="peity_live peity_data">5,3,9,6,5,9,7,3,5,2,5,3,9,6,5,9,7,3,5,2</span></div>
                        <span class="uk-text-muted uk-text-small">Employees </span>
                        <h2 class="uk-margin-remove" id="peity_live_text">@Model.nb_user</h2>
                    </div>
                </div>
            </div>
        </div>
        <!-- circular charts -->
        <div class="uk-grid uk-grid-width-small-1-2 uk-grid-width-large-1-3 uk-grid-width-xlarge-1-5 uk-text-center uk-sortable sortable-handler" id="dashboard_sortable_cards" data-uk-sortable data-uk-grid-margin>
            <div>
                <a href="@(Url.Action("UsersAdmin", "Account"))">
                    <div class="md-card md-card-hover md-card-overlay">
                        <div class="md-card-content">
                            <div class="epc_chart" data-percent="76" data-bar-color="#03a9f4">
                                <span class="epc_chart_icon"><i class="material-icons">&#xE0BE;</i></span>
                            </div>
                        </div>
                        <div class="md-card-overlay-content">
                            <div class="uk-clearfix md-card-overlay-header">
                                <i class="md-icon material-icons md-card-overlay-toggler">&#xE5D4;</i>
                                <h3>
                                    Users Details
                                </h3>
                            </div>
                            Users Accounts Detais
                        </div>
                    </div>
                </a>
            </div>
            <div>
                <a href="@(Url.Action("Index", "Stat"))">
                    <div class="md-card md-card-hover md-card-overlay">
                        <div class="md-card-content uk-flex uk-flex-center uk-flex-middle">
                            <span class="peity_conversions_large peity_data">5,3,9,6,5,9,7</span>
                        </div>
                        <div class="md-card-overlay-content">
                            <div class="uk-clearfix md-card-overlay-header">
                                <i class="md-icon material-icons md-card-overlay-toggler">&#xE5D4;</i>
                                <h3>
                                    All statistics
                                </h3>
                            </div>
                            See More Statestics
                        </div>
                    </div>
                </a>
            </div>
            <div>
                <div class="md-card md-card-hover md-card-overlay">
                    <div class="md-card-content" id="canvas_1">
                        <div class="epc_chart" data-percent="100" data-bar-color="#9c27b0">
                            <span class="epc_chart_icon"><i class="material-icons">&#xE85D;</i></span>
                        </div>
                    </div>
                    <div class="md-card-overlay-content">
                        <div class="uk-clearfix md-card-overlay-header">
                            <i class="md-icon material-icons md-card-overlay-toggler">&#xE5D4;</i>
                            <h3>
                                Tasks List
                            </h3>
                        </div>
                        <p>See Recent Task progress</p>
                        <button class="md-btn md-btn-primary">More</button>
                    </div>
                </div>
            </div>
           
                <div>
                    <a href="@(Url.Action("Manhole", "EquipmentTemplates"))">
                        <div class="md-card md-card-hover md-card-overlay">
                            <div class="md-card-content">
                                <div class="epc_chart" data-percent="53" data-bar-color="#009688">
                                    <span class="epc_chart_icon"><i class="material-icons">&#xE7FE;</i></span>
                                </div>
                            </div>
                            <div class="md-card-overlay-content">
                                <div class="uk-clearfix md-card-overlay-header">
                                    <i class="md-icon material-icons md-card-overlay-toggler">&#xE5D4;</i>
                                    <h3>
                                        Template Equipements catalog
                                    </h3>
                                </div>
                                See Equipment Templates
                            </div>
                        </div>
                    </a>
        </div>
            
            <div>
                <a href="@(Url.Action("Register", "Account"))">
                    <div class="md-card md-card-hover md-card-overlay">
                        <div class="md-card-content">
                            <div class="epc_chart" data-percent="100" data-bar-color="#607d8b">
                                <span class="epc_chart_icon"><i class="material-icons">&#xE7FE;</i></span>
                            </div>
                        </div>
                        <div class="md-card-overlay-content">
                            <div class="uk-clearfix md-card-overlay-header">
                                <i class="md-icon material-icons md-card-overlay-toggler">&#xE5D4;</i>
                                <h3>
                                    User Registrations

                                </h3>
                            </div>

                            Add Users
                        </div>
                    </div>
                </a>
            </div>
        </div>
        <!-- tasks -->
        <div class="uk-grid" data-uk-grid-margin data-uk-grid-match="{target:'.md-card-content'}">
            <div class="uk-width-medium-1-1">
                <div class="md-card">
                    <div class="md-card-toolbar">
                        <div class="md-card-toolbar-actions">
                            <i class="md-icon material-icons md-card-fullscreen-activate">&#xE5D0;</i>
                            <i class="md-icon material-icons">&#xE5D5;</i>
                            <div class="md-card-dropdown" data-uk-dropdown="{pos:'bottom-right'}">
                                <i class="md-icon material-icons">&#xE5D4;</i>
                                <div class="uk-dropdown uk-dropdown-small">
                                    <ul class="uk-nav">
                                        <li><a href="#">All projects</a></li>
                                        
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <h3 class="md-card-toolbar-heading-text">
                            Recent Tasks
                        </h3>
                    </div>
                    <div class="md-card-content">
                        <div class="uk-overflow-container">
                            <table class="uk-table">
                                <thead>
                                    <tr>
                                        <th class="uk-text-nowrap">Task</th>
                                        <th class="uk-text-nowrap">Status</th>
                                        <th class="uk-text-nowrap">Progress</th>
                                        <th class="uk-text-nowrap uk-text-right">Due Date</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @foreach (var t in Model.tasks)
                                    {
                                        string d = "not_set";
                                        if (t.progresses.Count() > 0)
                                        {
                                            d = t.progresses.Last().date.ToString();
                                        }
                                        <tr class="uk-table-middle">
                                            <td class="uk-width-3-10 uk-text-nowrap"><a href="#">@t.Nom</a></td>
                                            @if (t.progresses.Count() != 0 && t.progresses.Last().progress == 0)
                                            {
                                                <td class="uk-width-2-10 uk-text-nowrap"><span class="uk-badge uk-badge-warning">Open</span></td>
                                                <td class="uk-width-3-10">
                                                    <div class="uk-progress uk-progress-mini uk-progress-success uk-margin-remove">
                                                        <div class="uk-progress-bar" style="width: 1%;"></div>
                                                    </div>
                                                </td>
                                            }
                                            else if ((t.progresses.Count() != 0 && t.progresses.Last().progress == 100))
                                            {
                                                <td class="uk-width-2-10 uk-text-nowrap"><span class="uk-badge uk-badge-success">Resolved</span></td>
                                                <td class="uk-width-3-10">
                                                    <div class="uk-progress uk-progress-mini uk-progress-primary uk-margin-remove">
                                                        <div class="uk-progress-bar" style="width: 100%;"></div>
                                                    </div>
                                                </td>
                                            }
                                            else
                                            {
                                                <td class="uk-width-2-10 uk-text-nowrap"><span class="uk-badge">In progress</span></td>
                                                <td class="uk-width-3-10">
                                                    <div class="uk-progress uk-progress-mini uk-progress-warning uk-margin-remove">
                                                        <div class="uk-progress-bar" style="width: 40%;"></div>
                                                    </div>
                                                </td>
                                            }
                                            

                                            <td class="uk-width-2-10 uk-text-right uk-text-muted uk-text-small">@d</td>
                                        </tr>
                                    }
                                   
                                    
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
           
        </div>
      </div>

</div>
@section Scripts {
    <!-- page specific plugins -->
    <!-- d3 -->
    <script src="/bower_components/d3/d3.min.js"></script>
    <!-- metrics graphics (charts) -->
    <script src="/bower_components/metrics-graphics/dist/metricsgraphics.min.js"></script>
    <!-- chartist (charts) -->
    <script src="/bower_components/chartist/dist/chartist.min.js"></script>
    <!-- peity (small charts) -->
    <script src="/bower_components/peity/jquery.peity.min.js"></script>
    <!-- easy-pie-chart (circular statistics) -->
    <script src="/bower_components/jquery.easy-pie-chart/dist/jquery.easypiechart.min.js"></script>
    <!-- handlebars.js -->
    <script src="/bower_components/handlebars/handlebars.min.js"></script>
    <script src="/assets/js/custom/handlebars_helpers.min.js"></script>
    <!-- fitvids -->
    <script src="/bower_components/fitvids/jquery.fitvids.js"></script>
    <!--  dashbord functions -->
    <script src="/assets/js/pages/dashboard.min.js"></script>
}

